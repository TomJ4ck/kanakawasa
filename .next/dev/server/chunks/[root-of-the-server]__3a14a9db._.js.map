{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/%E7%A8%BC%E5%83%8D/kanakawasa/pages/api/proxy/%5B...path%5D.ts"],"sourcesContent":["import type { NextApiRequest, NextApiResponse } from 'next';\r\nimport axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:9002';\r\n\r\nexport default async function handler(\r\n  req: NextApiRequest,\r\n  res: NextApiResponse\r\n) {\r\n  // 只允许 GET 请求\r\n  if (req.method !== 'GET') {\r\n    return res.status(405).json({ message: 'Method not allowed' });\r\n  }\r\n\r\n  try {\r\n    const { path } = req.query;\r\n    const apiPath = Array.isArray(path) ? path.join('/') : path || '';\r\n    const apiUrl = `${API_BASE_URL}/${apiPath}`;\r\n\r\n    // 转发请求到后端 API\r\n    const response = await axios.get(apiUrl, {\r\n      params: req.query,\r\n      timeout: 10000,\r\n    });\r\n\r\n    // 返回后端响应\r\n    res.status(response.status).json(response.data);\r\n  } catch (error: any) {\r\n    console.error('Proxy error:', error);\r\n    \r\n    if (error.response) {\r\n      res.status(error.response.status).json(error.response.data);\r\n    } else if (error.request) {\r\n      res.status(500).json({ \r\n        message: '无法连接到后端服务器',\r\n        error: error.message \r\n      });\r\n    } else {\r\n      res.status(500).json({ \r\n        message: '代理请求失败',\r\n        error: error.message \r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AACA;;;;;;AAEA,MAAM,eAAe,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAEzC,eAAe,QAC5B,GAAmB,EACnB,GAAoB;IAEpB,aAAa;IACb,IAAI,IAAI,MAAM,KAAK,OAAO;QACxB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAqB;IAC9D;IAEA,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,GAAG,IAAI,KAAK;QAC1B,MAAM,UAAU,MAAM,OAAO,CAAC,QAAQ,KAAK,IAAI,CAAC,OAAO,QAAQ;QAC/D,MAAM,SAAS,GAAG,aAAa,CAAC,EAAE,SAAS;QAE3C,cAAc;QACd,MAAM,WAAW,MAAM,qHAAK,CAAC,GAAG,CAAC,QAAQ;YACvC,QAAQ,IAAI,KAAK;YACjB,SAAS;QACX;QAEA,SAAS;QACT,IAAI,MAAM,CAAC,SAAS,MAAM,EAAE,IAAI,CAAC,SAAS,IAAI;IAChD,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,gBAAgB;QAE9B,IAAI,MAAM,QAAQ,EAAE;YAClB,IAAI,MAAM,CAAC,MAAM,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,QAAQ,CAAC,IAAI;QAC5D,OAAO,IAAI,MAAM,OAAO,EAAE;YACxB,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBACnB,SAAS;gBACT,OAAO,MAAM,OAAO;YACtB;QACF,OAAO;YACL,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBACnB,SAAS;gBACT,OAAO,MAAM,OAAO;YACtB;QACF;IACF;AACF"}}]
}